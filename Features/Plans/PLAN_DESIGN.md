# 计划视图设计方案

## 设计目标

1. **突出重点**：让用户快速看到最相关的计划（今日、本周、本月）
2. **体现树状关系**：清晰展示年→月→周→日的层级结构
3. **操作路径短**：最少点击次数就能看到和操作计划

## 设计方案

### 1. 快捷入口卡片（顶部）

**位置**：页面最顶部，最显眼的位置

**内容**：
- **今日计划**（最突出，单独一行，橙色）
  - 显示今天的所有日计划数量
  - 点击直接进入今日计划列表
- **本周计划** + **本月计划**（并排显示）
  - 显示本周/本月的计划数量
  - 点击进入对应类型的计划列表

**优势**：
- 用户打开 App 就能立即看到"今天要做什么"
- 符合用户的使用习惯（最关心今天的任务）

### 2. 树状计划列表（下方）

**结构**：
- 默认只显示**顶级计划**（年计划）
- 点击计划卡片可以**展开/折叠**查看子计划
- 用**视觉层次**区分不同层级：
  - **缩进**：子计划向右缩进（每级16点）
  - **卡片大小**：层级越高，卡片越大（年计划100%，月计划95%，周计划90%，日计划85%）
  - **左侧边框**：不同层级用不同粗细/透明度的彩色边框
  - **字体大小**：顶级计划用 `headline`，子计划用 `body`

**交互**：
- 有子计划的卡片：点击展开/折叠
- 没有子计划的卡片：点击进入详情页
- 展开状态会记住，下次打开时保持

**视觉设计**：
- 年计划：紫色，大卡片，粗边框
- 月计划：蓝色，中等卡片
- 周计划：绿色，较小卡片
- 日计划：橙色，最小卡片

### 3. 层级关系可视化

**方式**：
1. **缩进**：子计划向右缩进，清晰展示层级
2. **连接线**：子计划左侧有细线，连接到父计划
3. **颜色渐变**：同一层级的计划使用相同颜色，但透明度随层级降低
4. **图标**：不同类型计划有不同的图标

## 用户操作路径

### 场景1：查看今日计划
- **路径**：打开 App → 点击"今日计划"卡片 → 查看今日所有日计划
- **点击次数**：1次

### 场景2：查看某个年计划的详细情况
- **路径**：打开 App → 找到年计划卡片 → 点击展开 → 查看月计划 → 点击展开 → 查看周计划 → 点击展开 → 查看日计划
- **点击次数**：3-4次（取决于层级深度）

### 场景3：快速查看本周计划
- **路径**：打开 App → 点击"本周计划"卡片
- **点击次数**：1次

### 场景4：查看所有计划（概览）
- **路径**：打开 App → 向下滚动查看树状列表
- **点击次数**：0次（直接可见）

## 技术实现

### 数据结构
- 使用 `PlanNode` 构建树状结构
- 使用 `Set<String>` 记录展开的计划ID
- 通过 `parentId` 关联父子关系

### 性能优化
- 使用 `LazyVStack` 延迟加载
- 只渲染可见的计划节点
- 展开/折叠使用动画过渡

## 后续优化方向

1. **搜索功能**：快速定位某个计划
2. **筛选功能**：按状态（进行中/已完成/已归档）筛选
3. **排序功能**：按时间/优先级/创建时间排序
4. **批量操作**：批量展开/折叠同一层级的计划
5. **快捷操作**：长按计划卡片显示快捷菜单（打卡、编辑、删除等）
